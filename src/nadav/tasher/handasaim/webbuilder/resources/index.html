<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, minimal-ui"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <link rel="apple-touch-icon" href="web_res/icon_apple.png"/>
  <link rel="icon" href="web_res/icon.png"/>
  <title>H+</title>
  <style>
    .lessonView {
      background-color: #333;
      border-radius: 10px;
      width: inherit;
    }

    .lessonViewText {
      color: #FFF;
      font-size: 150%;
      text-align: right;
      padding: 8% 4%;
    }

    .hiddenView {
      visibility: hidden;
      display: none;
      height: 0;
    }

    .topBarIcon {
      height: inherit;
      vertical-align: middle;
      width: 8vh;
    }

    .classroomSchedule {
      /* display: flex; */
      /* font-size: 0; */
    }

    #cornerTop {}

    #cornerBottom {}

    #topBar {
      vertical-align: top;
      border-radius: 10px;
      height: auto;
      width: inherit;
      /* position: absolute;
      vertical-align: top; */
    }

    #bottomBar {
      position: absolute;
      vertical-align: bottom;
      height: auto;
      width: auto;
      /* position: relative; */
    }

    #content {
      border-radius: 10px;
    }

    #classroomSwitcher {
      background-color: #333;
      border-radius: 10px;
    }

    #menuIcons {
      height: inherit;
      padding: 1vh;
    }

    #corner {
      height: 14vh;
      width: 14vh;
      border-radius: 14vh 0 0 0;
      -moz-border-radius: 14vh 0 0 0;
      -webkit-border-radius: 14vh 0 0 0;
      position: fixed;
      bottom: 0;
      right: 0;

    }

    #cornerContent {
      height: 11vh;
      width: 11vh;
      position: fixed;
      bottom: 0;
      right: 0;
    }

    #cornerTop {
      font-size: 160%;
      text-align: center;
      vertical-align: middle;
    }

    #cornerBottom {
      font-size: 120%;
      text-align: center;
      vertical-align: middle;
    }

    html {
      height: auto;
      width: 100%;
      overflow-x: hidden;
    }

    body {
      background-repeat: no-repeat;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: cover;
      min-height: 100vh;
    }

    p {
      font-family: Arial, ArialHebrew, sans-serif;
      color: #FFF;
      margin: 1vh;
    }
  </style>
  <script type="text/javascript">
    var schedule = {};
    var topBarColor = "#808080";
    var iconColor = "#dd8833";
    var topColor = "#00BA46";
    var bottomColor = "#00649C";
    var classCookie = "class";

    function onPageLoad() {
      hideTopBar();
      setupColors();
      parseSchedule();
      setClassroom((getCookie(classCookie) != "" && getCookie(classCookie) != "undefined") ? getCookie(classCookie) : schedule.classrooms[0].n);
    }

    function setupColors() {
      setupTopBarColor();
      setupTopColor();
      setupCornerColor();
      setupBackground();
    }

    function setupTopBarColor() {
      document.getElementById("topBar").style.backgroundColor = topBarColor;
    }

    function setupTopColor() {
      var meta = document.createElement('meta');
      meta.name = "theme-color";
      meta.content = topColor;
      document.getElementsByTagName('head')[0].appendChild(meta);
    }

    function setupCornerColor() {
      document.getElementById("corner").style.backgroundColor = topColor + "80";
    }

    function hideTopBar() {
      hideView(document.getElementById("topBar"));
    }

    function showTopBar() {
      showView(document.getElementById("topBar"));
    }

    function hideView(view) {
      view.style.visibility = "hidden";
      view.style.display = "none";
      view.style.height = "0";
    }

    function showView(view) {
      view.style.visibility = "visible";
      view.style.display = "block";
      view.style.height = "auto";
    }

    function setupBackground() {
      // document.body.style.backgroundColor = backColor;
      document.body.style.backgroundImage = 'linear-gradient(to bottom,' + topColor + ', ' + bottomColor + ')';
      document.body.style.backgroundColor = topColor;
    }

    function parseSchedule() {
      var content = document.getElementById("content");
      for (var c = 0; c < schedule.classrooms.length; c++) {
        var classroomView = document.createElement("div");
        classroomView.id = schedule.classrooms[c].n;
        classroomView.classList.add("classroomSchedule");
        for (var s = 0; s < schedule.classrooms[c].sjs.length; s++) {
          // Create Lesson View
          var lessonView = document.createElement("div");
          lessonView.classList.add("lessonView");
          // Create Lesson View Texts
          var lessonViewTopText = document.createElement("p");
          lessonViewTopText.classList.add("lessonViewText");
          // Apply Variables
          var lessonName = schedule.classrooms[c].sjs[s].n;
          var lessonHour = schedule.classrooms[c].sjs[s].h;
          // Set Text
          lessonViewTopText.innerHTML = "\u200F" + lessonHour + ". " + lessonName;
          // Add To Layout
          lessonView.appendChild(lessonViewTopText);
          if (lessonName.length > 0) {
            classroomView.appendChild(lessonView);
          }
        }
        content.appendChild(classroomView);
        hideView(classroomView);
      }
    }

    function setClassroom(classroomName) {
      setCookie(classCookie, classroomName);
      document.getElementById("cornerTop").innerHTML = classroomName;
      document.getElementById("cornerBottom").innerHTML = schedule.day;
      for (var i = 0; i < document.getElementsByClassName("classroomSchedule").length; i++) {
        hideView(document.getElementsByClassName("classroomSchedule")[i]);
      }
      showView(document.getElementById(classroomName));
    }

    function isHidden(view) {
      return view.style.visibility == "hidden";
    }

    function displayClassroomSwitcher() {

    }

    function toggleMenu() {
      if (isHidden(document.getElementById("topBar"))) {
        showTopBar();
      } else {
        hideTopBar();
      }
    }

    function displayAbout() {
      showView(document.getElementById("aboutView"));
    }

    function setCookie(cname, cvalue) {
      var exdays = 365;
      var d = new Date();
      d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
      var expires = "expires=" + d.toUTCString();
      document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    function getCookie(cname) {
      var name = cname + "=";
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

    function refresh() {
      document.location.reload(true);
    }
  </script>
</head>

<body onload="onPageLoad()">
<center>
  <div id="topBar">
      <div id="menuIcons">
        <img src="web_res/class.svg" class="topBarIcon" onclick="displayClassroomSwitcher()"/>
        <img src="web_res/icon.svg" class="topBarIcon" onclick="displayAbout()"/>
        <img src="web_res/refresh.svg" class="topBarIcon" onclick="refresh()"/>
      </div>
      <div id="classroomSwitcher" class="hiddenView">
      </div>
      <div id="aboutView" class="hiddenView">
        <p>
          <b>Handasaim+ For Web</b><br/>
          <i><b>Made by Nadav Tasher</b></i><br/>
          <i>compilerVersion</i><br/>
          <i>appCoreVersion</i>
        </p>
      </div>
    </div>
  <div id="content">
    </div>
    <div id="bottomBar">
      <div id="corner" onclick="toggleMenu()">
        <div id="cornerContent">
          <p id="cornerTop"/>
          <p id="cornerBottom"/>
        </div>
      </div>
    </div>
</center>
</body>

</html>
